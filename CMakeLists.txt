

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(LIBAMANITA) 

OPTION(LIBAMANITA_DEBUG "Build the project using debugging code" ON)
OPTION(DJYNN "Build Djynn-plugin for Geany IDE" ON) 

FIND_PACKAGE(PkgConfig REQUIRED)
FIND_PACKAGE(Threads REQUIRED)

INCLUDE (${CMAKE_ROOT}/Modules/CheckIncludeFile.cmake)
CHECK_INCLUDE_FILE("unistd.h" HAVE_UNISTD_H)
IF(HAVE_UNISTD_H)
  ADD_DEFINITIONS(-DHAVE_UNISTD_H)
ENDIF(HAVE_UNISTD_H)


PKG_CHECK_MODULES(GTK2 REQUIRED gtk+-2.0)
INCLUDE_DIRECTORIES(${GTK_INCLUDE_DIRS})
LINK_DIRECTORIES(${GTK_LIBRARY_DIRS})
ADD_DEFINITIONS(${GTK_CFLAGS_OTHER})

PKG_CHECK_MODULES(WEBKIT REQUIRED webkit-1.0)
INCLUDE_DIRECTORIES(${WEBKIT_INCLUDE_DIRS})
LINK_DIRECTORIES(${WEBKIT_LIBRARY_DIRS})
ADD_DEFINITIONS(${WEBKIT_CFLAGS_OTHER})

PKG_CHECK_MODULES(GEANY REQUIRED geany)
INCLUDE_DIRECTORIES(${GEANY_INCLUDE_DIRS})
LINK_DIRECTORIES(${GEANY_LIBRARY_DIRS})
ADD_DEFINITIONS(${GEANY_CFLAGS_OTHER})

INCLUDE_DIRECTORIES("./include")

IF(UNIX)
  IF(APPLE)
    SET(GUI "Cocoa")
  ELSE(APPLE)
    SET(GUI "GTK+")
  ENDIF(APPLE)
  LINK_LIBRARIES(${CMAKE_THREAD_LIBS} ${CMAKE_DL_LIBS})
ELSE(UNIX)
  IF(WIN32)
    SET(GUI "Win32")
  ELSE(WIN32)
    SET(GUI "Unknown")
  ENDIF(WIN32)
ENDIF(UNIX)


CONFIGURE_FILE(
	"${PROJECT_SOURCE_DIR}/config.h.in"
	"${PROJECT_BINARY_DIR}/config.h"
)

ADD_SUBDIRECTORY(bin) 
ADD_SUBDIRECTORY(examples) 

